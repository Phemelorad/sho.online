<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard</title>
</head>
<body>
  <h2>Dashboard</h2>
  <div id="user-info" style="display:none;">
    Logged in as: <span id="user-email"></span>
    <button id="logout-btn">Logout</button>
  </div>
  <p id="loading-msg">Checking login status...</p>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
  <script>
    const supabaseUrl = 'https://your-project-id.supabase.co'; // 🔁 replace this
    const supabaseKey = 'your-anon-key'; // 🔁 replace this
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    window.addEventListener('DOMContentLoaded', async () => {
      const { data: { user }, error } = await supabase.auth.getUser();

      if (error || !user) {
        window.location.href = 'login.html';
        return;
      }

      document.getElementById('user-email').textContent = user.email;
      document.getElementById('user-info').style.display = 'block';
      document.getElementById('loading-msg').style.display = 'none';
    });

    document.getElementById('logout-btn').addEventListener('click', async () => {
      await supabase.auth.signOut();
      window.location.href = 'login.html';
    });
  </script>
</body>
</html>
